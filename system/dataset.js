function _0x514d(){const _0x54e868=['CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20database(id\x20integer,\x20data\x20json)','DATABASE_URL','test','execute','SELECT\x20data\x20FROM\x20database\x20WHERE\x20id\x20=\x20$1','env','commit','78RFiseO','save','public','signedIdentityKey','exports','query','options','drop','update','10893033mOOWkk','signedPreKey','updateAuth','sql','insert','signature','394560isqvwh','rows','findOne','auth','fetchAuth','rowCount','2080056QWJlbc','INSERT\x20INTO\x20authentication\x20VALUES($1,\x20$2)','model','242130pRwvQk','4204832rvqMLR','signalIdentities','identifierKey','data','noiseKey','2eQGxLL','buffer','keyPair','UPDATE\x20authentication\x20SET\x20auth\x20=\x20$1\x20WHERE\x20id\x20=\x20$2','198340GdJLCd','207484qxICLB','UPDATE\x20database\x20SET\x20data\x20=\x20$1\x20WHERE\x20id\x20=\x20$2','authentication','private','CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20authentication(id\x20integer,\x20auth\x20json)','Schema','_id','database','connection','mongoose','SELECT\x20*\x20FROM\x20authentication\x20WHERE\x20id\x20=\x20$1','INSERT\x20INTO\x20database\x20VALUES($1,$2)','findById','remove'];_0x514d=function(){return _0x54e868;};return _0x514d();}const _0x3f999e=_0x89ed;function _0x89ed(_0x28c20e,_0x208778){const _0x514db8=_0x514d();return _0x89ed=function(_0x89edef,_0x38f1a5){_0x89edef=_0x89edef-0x162;let _0x542fa4=_0x514db8[_0x89edef];return _0x542fa4;},_0x89ed(_0x28c20e,_0x208778);}(function(_0x2ac26c,_0x126c54){const _0x38659e=_0x89ed,_0x3a9ba1=_0x2ac26c();while(!![]){try{const _0x1a458b=-parseInt(_0x38659e(0x18e))/0x1+-parseInt(_0x38659e(0x189))/0x2*(-parseInt(_0x38659e(0x180))/0x3)+parseInt(_0x38659e(0x18d))/0x4+parseInt(_0x38659e(0x17a))/0x5+-parseInt(_0x38659e(0x16b))/0x6*(-parseInt(_0x38659e(0x183))/0x7)+parseInt(_0x38659e(0x184))/0x8+-parseInt(_0x38659e(0x174))/0x9;if(_0x1a458b===_0x126c54)break;else _0x3a9ba1['push'](_0x3a9ba1['shift']());}catch(_0xc021fe){_0x3a9ba1['push'](_0x3a9ba1['shift']());}}}(_0x514d,0x5c9a6));const mongoose=require(_0x3f999e(0x197)),{Pool}=require('pg');if(/mongo/[_0x3f999e(0x166)](process[_0x3f999e(0x169)]['DATABASE_URL']))module['exports']=class MongoDB{[_0x3f999e(0x171)]={'useNewUrlParser':!![],'useUnifiedTopology':!![]};[_0x3f999e(0x196)]=process[_0x3f999e(0x169)][_0x3f999e(0x165)];['model']={'authentication':{},'database':{}};['auth']={};[_0x3f999e(0x187)]={};[_0x3f999e(0x17e)]=async()=>{const _0xa37e33=_0x3f999e;mongoose['connect'](this['connection'],{...this['options']});try{const _0x353623=new mongoose['Schema']({'auth':{'type':Object,'required':!![],'default':{}}});this['model'][_0xa37e33(0x190)]=mongoose[_0xa37e33(0x182)](_0xa37e33(0x17d),_0x353623);}catch{this[_0xa37e33(0x182)][_0xa37e33(0x190)]=mongoose[_0xa37e33(0x182)](_0xa37e33(0x17d));}return this[_0xa37e33(0x17d)]=await this[_0xa37e33(0x182)][_0xa37e33(0x190)][_0xa37e33(0x17c)]({}),!this[_0xa37e33(0x17d)]?(new this['model']['authentication']({'auth':{}})['save'](),this[_0xa37e33(0x17d)]=await this['model'][_0xa37e33(0x190)]['findOne']({}),this[_0xa37e33(0x17d)]['auth'][_0xa37e33(0x188)][_0xa37e33(0x191)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)][_0xa37e33(0x188)][_0xa37e33(0x191)][_0xa37e33(0x18a)],this['auth'][_0xa37e33(0x17d)]['noiseKey']['public']=this['auth'][_0xa37e33(0x17d)][_0xa37e33(0x188)][_0xa37e33(0x16d)]['buffer'],this[_0xa37e33(0x17d)][_0xa37e33(0x17d)]['signedIdentityKey'][_0xa37e33(0x191)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)][_0xa37e33(0x16e)][_0xa37e33(0x191)]['buffer'],this['auth']['auth']['signedIdentityKey']['public']=this['auth']['auth'][_0xa37e33(0x16e)][_0xa37e33(0x16d)][_0xa37e33(0x18a)],this[_0xa37e33(0x17d)][_0xa37e33(0x17d)][_0xa37e33(0x175)]['keyPair'][_0xa37e33(0x191)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)]['signedPreKey'][_0xa37e33(0x18b)]['private'][_0xa37e33(0x18a)],this['auth'][_0xa37e33(0x17d)][_0xa37e33(0x175)]['keyPair'][_0xa37e33(0x16d)]=this['auth']['auth'][_0xa37e33(0x175)][_0xa37e33(0x18b)]['public']['buffer'],this[_0xa37e33(0x17d)]['auth']['signedPreKey'][_0xa37e33(0x179)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)][_0xa37e33(0x175)]['signature'][_0xa37e33(0x18a)],this[_0xa37e33(0x17d)]['auth'][_0xa37e33(0x185)][0x0]['identifierKey']=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)][_0xa37e33(0x185)][0x0][_0xa37e33(0x186)][_0xa37e33(0x18a)],this[_0xa37e33(0x17d)]['auth']):(this[_0xa37e33(0x17d)][_0xa37e33(0x17d)][_0xa37e33(0x188)][_0xa37e33(0x191)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)]['noiseKey'][_0xa37e33(0x191)][_0xa37e33(0x18a)],this[_0xa37e33(0x17d)][_0xa37e33(0x17d)][_0xa37e33(0x188)]['public']=this['auth'][_0xa37e33(0x17d)][_0xa37e33(0x188)]['public'][_0xa37e33(0x18a)],this[_0xa37e33(0x17d)]['auth'][_0xa37e33(0x16e)][_0xa37e33(0x191)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)]['signedIdentityKey']['private'][_0xa37e33(0x18a)],this['auth'][_0xa37e33(0x17d)][_0xa37e33(0x16e)][_0xa37e33(0x16d)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)][_0xa37e33(0x16e)]['public']['buffer'],this['auth'][_0xa37e33(0x17d)][_0xa37e33(0x175)][_0xa37e33(0x18b)][_0xa37e33(0x191)]=this[_0xa37e33(0x17d)]['auth'][_0xa37e33(0x175)][_0xa37e33(0x18b)]['private'][_0xa37e33(0x18a)],this[_0xa37e33(0x17d)]['auth'][_0xa37e33(0x175)][_0xa37e33(0x18b)][_0xa37e33(0x16d)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)]['signedPreKey'][_0xa37e33(0x18b)][_0xa37e33(0x16d)]['buffer'],this[_0xa37e33(0x17d)]['auth'][_0xa37e33(0x175)][_0xa37e33(0x179)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)]['signedPreKey'][_0xa37e33(0x179)][_0xa37e33(0x18a)],this['auth'][_0xa37e33(0x17d)][_0xa37e33(0x185)][0x0][_0xa37e33(0x186)]=this[_0xa37e33(0x17d)][_0xa37e33(0x17d)]['signalIdentities'][0x0][_0xa37e33(0x186)]['buffer'],this['auth'][_0xa37e33(0x17d)]);};['updateAuth']=async _0x2e13d6=>{const _0xd81c64=_0x3f999e;if(this['auth']&&!this[_0xd81c64(0x17d)][_0xd81c64(0x17d)])return new this['model'][(_0xd81c64(0x190))]({'auth':_0x2e13d6})[_0xd81c64(0x16c)]();this[_0xd81c64(0x182)][_0xd81c64(0x190)]['findById'](this[_0xd81c64(0x17d)][_0xd81c64(0x194)],(_0x4c8fd7,_0x7475f1)=>{const _0x417976=_0xd81c64;if(_0x4c8fd7)return;if(!_0x7475f1[_0x417976(0x17d)])_0x7475f1[_0x417976(0x17d)]={};_0x7475f1['auth']=_0x2e13d6,_0x7475f1['save']();});};[_0x3f999e(0x172)]=async()=>{const _0x3de6fb=_0x3f999e;try{await this[_0x3de6fb(0x182)][_0x3de6fb(0x190)][_0x3de6fb(0x163)]();}catch{await this['fetchAuth']();}};['fetch']=async()=>{const _0x267bb7=_0x3f999e;mongoose['connect'](this[_0x267bb7(0x196)],{...this[_0x267bb7(0x171)]});try{const _0x316641=new mongoose[(_0x267bb7(0x193))]({'data':{'type':Object,'required':!![],'default':{}}});this['model'][_0x267bb7(0x195)]=mongoose[_0x267bb7(0x182)]('data',_0x316641);}catch{this[_0x267bb7(0x182)][_0x267bb7(0x195)]=mongoose['model'](_0x267bb7(0x187));}this[_0x267bb7(0x187)]=await this[_0x267bb7(0x182)][_0x267bb7(0x195)]['findOne']({});if(!this[_0x267bb7(0x187)])return new this[(_0x267bb7(0x182))][(_0x267bb7(0x195))]({'data':{}})['save'](),this[_0x267bb7(0x187)]=await this[_0x267bb7(0x182)]['database'][_0x267bb7(0x17c)]({}),this[_0x267bb7(0x187)][_0x267bb7(0x187)];else return this[_0x267bb7(0x187)]['data'];};[_0x3f999e(0x16c)]=async _0x32885d=>{const _0x707d31=_0x3f999e,_0x405696=_0x32885d?_0x32885d:global['db'];if(this['data']&&!this[_0x707d31(0x187)]['data'])return new this[(_0x707d31(0x182))][(_0x707d31(0x195))]({'data':_0x405696})[_0x707d31(0x16c)]();this[_0x707d31(0x182)][_0x707d31(0x195)][_0x707d31(0x162)](this[_0x707d31(0x187)][_0x707d31(0x194)],(_0x220e57,_0x10767c)=>{const _0x321785=_0x707d31;if(_0x220e57)return;if(!_0x10767c[_0x321785(0x187)])_0x10767c[_0x321785(0x187)]={};_0x10767c[_0x321785(0x187)]=global['db'],_0x10767c['save']();});};};else/postgres/[_0x3f999e(0x166)](process[_0x3f999e(0x169)][_0x3f999e(0x165)])&&(module[_0x3f999e(0x16f)]=class Postgres{[_0x3f999e(0x177)]=new Pool({'connectionString':process[_0x3f999e(0x169)]['DATABASE_URL'],'ssl':{'rejectUnauthorized':![]}});['auth']={};[_0x3f999e(0x187)]={};async[_0x3f999e(0x167)](_0x2736f9){const _0x47d1cc=_0x3f999e;return _0x2736f9?await await this[_0x47d1cc(0x177)][_0x47d1cc(0x170)](_0x2736f9):(await this[_0x47d1cc(0x177)]['query'](_0x47d1cc(0x164)),await this[_0x47d1cc(0x177)]['query'](_0x47d1cc(0x192)),0x1);}['fetchAuth']=async(_0x5286d7=0x1)=>{const _0x582cf1=_0x3f999e;try{return this['auth']=await(await this[_0x582cf1(0x177)]['query'](_0x582cf1(0x198),[_0x5286d7]))[_0x582cf1(0x17b)][0x0],this[_0x582cf1(0x17d)][_0x582cf1(0x17d)];}catch{await this[_0x582cf1(0x167)]();}};[_0x3f999e(0x176)]=async(_0x16769d,_0x1b6078=0x1)=>{const _0x390b67=_0x3f999e;try{const _0xde4570=await this[_0x390b67(0x17e)]();_0xde4570?(await this[_0x390b67(0x177)][_0x390b67(0x170)](_0x390b67(0x18c),[_0x16769d,_0x1b6078]),await this['sql'][_0x390b67(0x170)]('commit')):(await this[_0x390b67(0x177)][_0x390b67(0x170)](_0x390b67(0x181),[_0x1b6078,_0x16769d]),await this[_0x390b67(0x177)]['query'](_0x390b67(0x16a)));}catch{await this['execute']();}};['drop']=async()=>{const _0x2abdcb=_0x3f999e;try{await this[_0x2abdcb(0x177)]['query']('DROP\x20TABLE\x20authentication');}catch{await this[_0x2abdcb(0x167)]();}};['fetch']=async(_0x49ab92=0x1)=>{const _0x17316c=_0x3f999e;try{return this[_0x17316c(0x187)]=await(await this[_0x17316c(0x177)][_0x17316c(0x170)](_0x17316c(0x168),[_0x49ab92]))[_0x17316c(0x17b)][0x0],this[_0x17316c(0x187)][_0x17316c(0x187)];}catch{await this[_0x17316c(0x167)]();}};async[_0x3f999e(0x178)](_0x4f0b9f={},_0x4afc04=0x1){const _0xa4c69c=_0x3f999e;try{await this[_0xa4c69c(0x177)][_0xa4c69c(0x170)](_0xa4c69c(0x199),[_0x4afc04,_0x4f0b9f]),await this[_0xa4c69c(0x177)][_0xa4c69c(0x170)](_0xa4c69c(0x16a));}catch{await this['execute']();}}async[_0x3f999e(0x173)](_0x53f67d={},_0x17f4f1=0x1){const _0x48393a=_0x3f999e;try{await this[_0x48393a(0x177)][_0x48393a(0x170)](_0x48393a(0x18f),[_0x53f67d,_0x17f4f1]),await this[_0x48393a(0x177)][_0x48393a(0x170)](_0x48393a(0x16a));}catch{await this['execute']();}}['save']=async(_0x4abe9a,_0x4b31e0=0x1)=>{const _0xd30849=_0x3f999e;try{const _0x150965=await this['sql'][_0xd30849(0x170)](_0xd30849(0x168),[_0x4b31e0]);_0x150965[_0xd30849(0x17f)]==0x0?await this[_0xd30849(0x178)](_0x4abe9a?_0x4abe9a:global['db'],_0x4b31e0):await this[_0xd30849(0x173)](_0x4abe9a?_0x4abe9a:global['db'],_0x4b31e0);}catch{await this['execute']();}};});