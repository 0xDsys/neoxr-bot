const _0x429701=_0xd036;(function(_0x4554ae,_0x1618b0){const _0xac7936=_0xd036,_0x46c78f=_0x4554ae();while(!![]){try{const _0x5a0dae=-parseInt(_0xac7936(0x1e9))/0x1*(-parseInt(_0xac7936(0x1fc))/0x2)+-parseInt(_0xac7936(0x1fb))/0x3*(-parseInt(_0xac7936(0x1e1))/0x4)+parseInt(_0xac7936(0x1ca))/0x5*(-parseInt(_0xac7936(0x1f8))/0x6)+-parseInt(_0xac7936(0x1d3))/0x7+parseInt(_0xac7936(0x1d2))/0x8*(parseInt(_0xac7936(0x1d0))/0x9)+-parseInt(_0xac7936(0x1cb))/0xa+parseInt(_0xac7936(0x1e5))/0xb;if(_0x5a0dae===_0x1618b0)break;else _0x46c78f['push'](_0x46c78f['shift']());}catch(_0x3f9545){_0x46c78f['push'](_0x46c78f['shift']());}}}(_0x38aa,0xc289c));function _0xd036(_0x32172a,_0x287e01){const _0x38aab3=_0x38aa();return _0xd036=function(_0xd03654,_0x10dd07){_0xd03654=_0xd03654-0x1c5;let _0x5266ee=_0x38aab3[_0xd03654];return _0x5266ee;},_0xd036(_0x32172a,_0x287e01);}function _0x38aa(){const _0x3d9842=['24485087RsFXPe','noiseKey','signalIdentities','SELECT\x20*\x20FROM\x20authentication\x20WHERE\x20id\x20=\x20$1','380OHySUe','test','insert','buffer','fetchAuth','keyPair','connect','auth','signedPreKey','execute','DATABASE_URL','rows','database','query','INSERT\x20INTO\x20authentication\x20VALUES($1,\x20$2)','1074Thrhld','findOne','Schema','6oidhzP','4156XMxqzW','data','options','signature','sql','update','CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20database(id\x20integer,\x20data\x20json)','7660snTYPc','13936170leVdiK','commit','exports','SELECT\x20data\x20FROM\x20database\x20WHERE\x20id\x20=\x20$1','authentication','6284232MeimhU','fetch','8CCSHKC','9409022cKIEot','fetchAll','findById','UPDATE\x20authentication\x20SET\x20auth\x20=\x20$1\x20WHERE\x20id\x20=\x20$2','SELECT\x20data\x20FROM\x20database','UPDATE\x20database\x20SET\x20data\x20=\x20$1\x20WHERE\x20id\x20=\x20$2','connection','env','signedIdentityKey','public','identifierKey','save','private','_id','190028FZlTAW','model','mongoose','updateAuth'];_0x38aa=function(){return _0x3d9842;};return _0x38aa();}const mongoose=require(_0x429701(0x1e3)),{Pool}=require('pg');if(/mongo/[_0x429701(0x1ea)](process[_0x429701(0x1da)][_0x429701(0x1f3)]))module[_0x429701(0x1cd)]=class MongoDB{[_0x429701(0x1c5)]={'useNewUrlParser':!![],'useUnifiedTopology':!![]};[_0x429701(0x1d9)]=process[_0x429701(0x1da)]['DATABASE_URL'];['model']={'authentication':{},'database':{}};[_0x429701(0x1f0)]={};['data']={};[_0x429701(0x1ed)]=async()=>{const _0x1f6afd=_0x429701;mongoose[_0x1f6afd(0x1ef)](this[_0x1f6afd(0x1d9)],{...this[_0x1f6afd(0x1c5)]});try{const _0x83dd5d=new mongoose[(_0x1f6afd(0x1fa))]({'auth':{'type':Object,'required':!![],'default':{}}});this[_0x1f6afd(0x1e2)]['authentication']=mongoose['model'](_0x1f6afd(0x1f0),_0x83dd5d);}catch{this[_0x1f6afd(0x1e2)][_0x1f6afd(0x1cf)]=mongoose[_0x1f6afd(0x1e2)](_0x1f6afd(0x1f0));}return this[_0x1f6afd(0x1f0)]=await this['model'][_0x1f6afd(0x1cf)]['findOne']({}),!this[_0x1f6afd(0x1f0)]?(new this[(_0x1f6afd(0x1e2))][(_0x1f6afd(0x1cf))]({'auth':{}})['save'](),this[_0x1f6afd(0x1f0)]=await this['model'][_0x1f6afd(0x1cf)][_0x1f6afd(0x1f9)]({}),this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e6)]['private']=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)]['noiseKey']['private']['buffer'],this['auth'][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e6)][_0x1f6afd(0x1dc)]=this[_0x1f6afd(0x1f0)]['auth'][_0x1f6afd(0x1e6)][_0x1f6afd(0x1dc)][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1db)][_0x1f6afd(0x1df)]=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)]['signedIdentityKey'][_0x1f6afd(0x1df)][_0x1f6afd(0x1ec)],this['auth'][_0x1f6afd(0x1f0)]['signedIdentityKey'][_0x1f6afd(0x1dc)]=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1db)][_0x1f6afd(0x1dc)][_0x1f6afd(0x1ec)],this['auth'][_0x1f6afd(0x1f0)]['signedPreKey']['keyPair'][_0x1f6afd(0x1df)]=this['auth'][_0x1f6afd(0x1f0)][_0x1f6afd(0x1f1)]['keyPair'][_0x1f6afd(0x1df)][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1f1)][_0x1f6afd(0x1ee)][_0x1f6afd(0x1dc)]=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1f1)]['keyPair']['public']['buffer'],this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1f1)][_0x1f6afd(0x1c6)]=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1f1)][_0x1f6afd(0x1c6)][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e7)][0x0][_0x1f6afd(0x1dd)]=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e7)][0x0][_0x1f6afd(0x1dd)]['buffer'],this['auth'][_0x1f6afd(0x1f0)]):(this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e6)]['private']=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)]['noiseKey']['private'][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e6)][_0x1f6afd(0x1dc)]=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e6)][_0x1f6afd(0x1dc)][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)]['auth'][_0x1f6afd(0x1db)][_0x1f6afd(0x1df)]=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)]['signedIdentityKey'][_0x1f6afd(0x1df)][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1db)][_0x1f6afd(0x1dc)]=this['auth']['auth'][_0x1f6afd(0x1db)]['public'][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1f1)][_0x1f6afd(0x1ee)][_0x1f6afd(0x1df)]=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1f1)][_0x1f6afd(0x1ee)][_0x1f6afd(0x1df)]['buffer'],this['auth'][_0x1f6afd(0x1f0)]['signedPreKey']['keyPair'][_0x1f6afd(0x1dc)]=this[_0x1f6afd(0x1f0)]['auth'][_0x1f6afd(0x1f1)][_0x1f6afd(0x1ee)]['public'][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)]['auth'][_0x1f6afd(0x1f1)]['signature']=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1f1)]['signature'][_0x1f6afd(0x1ec)],this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e7)][0x0]['identifierKey']=this[_0x1f6afd(0x1f0)][_0x1f6afd(0x1f0)][_0x1f6afd(0x1e7)][0x0][_0x1f6afd(0x1dd)][_0x1f6afd(0x1ec)],this['auth'][_0x1f6afd(0x1f0)]);};[_0x429701(0x1e4)]=async _0x36812f=>{const _0x32215a=_0x429701;if(this[_0x32215a(0x1f0)]&&!this[_0x32215a(0x1f0)]['auth'])return new this[(_0x32215a(0x1e2))][(_0x32215a(0x1cf))]({'auth':_0x36812f})[_0x32215a(0x1de)]();this[_0x32215a(0x1e2)][_0x32215a(0x1cf)][_0x32215a(0x1d5)](this[_0x32215a(0x1f0)][_0x32215a(0x1e0)],(_0x5ad7b9,_0xa7cd82)=>{const _0x564623=_0x32215a;if(_0x5ad7b9)return;if(!_0xa7cd82[_0x564623(0x1f0)])_0xa7cd82[_0x564623(0x1f0)]={};_0xa7cd82[_0x564623(0x1f0)]=_0x36812f,_0xa7cd82['save']();});};['fetch']=async()=>{const _0x51a783=_0x429701;mongoose[_0x51a783(0x1ef)](this[_0x51a783(0x1d9)],{...this[_0x51a783(0x1c5)]});try{const _0x1ad395=new mongoose[(_0x51a783(0x1fa))]({'data':{'type':Object,'required':!![],'default':{}}});this['model'][_0x51a783(0x1f5)]=mongoose['model'](_0x51a783(0x1fd),_0x1ad395);}catch{this[_0x51a783(0x1e2)][_0x51a783(0x1f5)]=mongoose[_0x51a783(0x1e2)](_0x51a783(0x1fd));}this[_0x51a783(0x1fd)]=await this[_0x51a783(0x1e2)][_0x51a783(0x1f5)][_0x51a783(0x1f9)]({});if(!this['data'])return new this[(_0x51a783(0x1e2))][(_0x51a783(0x1f5))]({'data':{}})[_0x51a783(0x1de)](),this[_0x51a783(0x1fd)]=await this[_0x51a783(0x1e2)]['database'][_0x51a783(0x1f9)]({}),this[_0x51a783(0x1fd)][_0x51a783(0x1fd)];else return this[_0x51a783(0x1fd)][_0x51a783(0x1fd)];};[_0x429701(0x1de)]=async _0x41d12e=>{const _0x2c7ee0=_0x429701,_0x5d1eb8=_0x41d12e?_0x41d12e:global['db'];if(this[_0x2c7ee0(0x1fd)]&&!this[_0x2c7ee0(0x1fd)][_0x2c7ee0(0x1fd)])return new this[(_0x2c7ee0(0x1e2))][(_0x2c7ee0(0x1f5))]({'data':_0x5d1eb8})[_0x2c7ee0(0x1de)]();this[_0x2c7ee0(0x1e2)][_0x2c7ee0(0x1f5)][_0x2c7ee0(0x1d5)](this[_0x2c7ee0(0x1fd)]['_id'],(_0x1001a7,_0x49ec8b)=>{const _0x53b317=_0x2c7ee0;if(_0x1001a7)return;if(!_0x49ec8b[_0x53b317(0x1fd)])_0x49ec8b[_0x53b317(0x1fd)]={};_0x49ec8b['data']=global['db'],_0x49ec8b['save']();});};};else/postgres/[_0x429701(0x1ea)](process['env'][_0x429701(0x1f3)])&&(module[_0x429701(0x1cd)]=class Postgres{[_0x429701(0x1c7)]=new Pool({'connectionString':process[_0x429701(0x1da)][_0x429701(0x1f3)],'ssl':{'rejectUnauthorized':![]}});[_0x429701(0x1f2)]=async _0xd9281=>{const _0x1118df=_0x429701;return _0xd9281?await await this[_0x1118df(0x1c7)][_0x1118df(0x1f6)](_0xd9281):(await this[_0x1118df(0x1c7)]['query'](_0x1118df(0x1c9)),await this[_0x1118df(0x1c7)][_0x1118df(0x1f6)]('CREATE\x20TABLE\x20IF\x20NOT\x20EXISTS\x20authentication(id\x20integer,\x20auth\x20json)'),0x1);};[_0x429701(0x1ed)]=async(_0x3f919a=0x1)=>{const _0x540398=_0x429701;try{return await(await this[_0x540398(0x1c7)][_0x540398(0x1f6)](_0x540398(0x1e8),[_0x3f919a]))['rows'][0x0]['auth'];}catch{await this[_0x540398(0x1f2)]();}};['updateAuth']=async(_0x4a357f,_0x52e587=0x1)=>{const _0x999b62=_0x429701;try{const _0x32e7cb=await this[_0x999b62(0x1ed)]();_0x32e7cb?(await this[_0x999b62(0x1c7)][_0x999b62(0x1f6)](_0x999b62(0x1d6),[_0x4a357f,_0x52e587]),await this['sql'][_0x999b62(0x1f6)](_0x999b62(0x1cc))):(await this[_0x999b62(0x1c7)][_0x999b62(0x1f6)](_0x999b62(0x1f7),[_0x52e587,_0x4a357f]),await this['sql'][_0x999b62(0x1f6)](_0x999b62(0x1cc)));}catch{await this[_0x999b62(0x1f2)]();}};[_0x429701(0x1d1)]=async(_0x3f23f5=0x1)=>{const _0x18c008=_0x429701;try{return await(await this[_0x18c008(0x1c7)]['query'](_0x18c008(0x1ce),[_0x3f23f5]))[_0x18c008(0x1f4)][0x0][_0x18c008(0x1fd)];}catch{await this[_0x18c008(0x1f2)]();}};[_0x429701(0x1d4)]=async()=>{const _0x4f4a59=_0x429701;try{return await(await this[_0x4f4a59(0x1c7)][_0x4f4a59(0x1f6)](_0x4f4a59(0x1d7)))['rows'];}catch{await this[_0x4f4a59(0x1f2)]();}};[_0x429701(0x1eb)]=async(_0x53133e={},_0x297a44=0x1)=>{const _0x1d7b59=_0x429701;try{await this[_0x1d7b59(0x1c7)]['query']('INSERT\x20INTO\x20database\x20VALUES($1,$2)',[_0x297a44,_0x53133e]),await this[_0x1d7b59(0x1c7)]['query'](_0x1d7b59(0x1cc));}catch{await this[_0x1d7b59(0x1f2)]();}};[_0x429701(0x1c8)]=async(_0x29c68b={},_0x3ba2be=0x1)=>{const _0x3e7441=_0x429701;try{await this[_0x3e7441(0x1c7)][_0x3e7441(0x1f6)](_0x3e7441(0x1d8),[_0x29c68b,_0x3ba2be]),await this['sql']['query']('commit');}catch{await this[_0x3e7441(0x1f2)]();}};[_0x429701(0x1de)]=async(_0x3cc9ae,_0x40de7b=0x1)=>{const _0x1b8362=_0x429701;try{const _0x42fbfd=await(await this[_0x1b8362(0x1c7)][_0x1b8362(0x1f6)]('SELECT\x20data\x20FROM\x20database\x20WHERE\x20id\x20=\x20$1',[_0x40de7b]))[_0x1b8362(0x1f4)];_0x42fbfd['length']==0x0?await this[_0x1b8362(0x1eb)](_0x3cc9ae?_0x3cc9ae:global['db'],_0x40de7b):await this[_0x1b8362(0x1c8)](_0x3cc9ae?_0x3cc9ae:global['db'],_0x40de7b);}catch{await this['execute']();}};});